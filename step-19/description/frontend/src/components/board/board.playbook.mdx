# board Component (Scene for a visual component)
Holds a bunch of CardList components

### What we are working on
We can now drag card lists around but the order does not persist, let's try and save the order after drag

1. react-beautiful-dnd uses an index to set the position of each draggable item. We will use the array index to maintain order meaning we need a way to sort the array 
   so the index is in the correct order (array.sort on some key will do the trick)
2. A list has an ID that is static. This is generated on creation and does not ever change so we can't order on id. We will need to create another property for the list
   called position. Position can either be a number (0, 1, 2, ..., n) which we can then sort by ascending order OR we can use the lexicographic util to generate a ordered
   string which we can compare using String.compareLocale("other position");
3. Finally the listsData that is passed into the `Board` can be in any order, the `Board` component will handle how it is presented to the screen.

So what should we do?  

1. Use getDerivedStateFromProps (built in react function) to create a state that has the ordered listsData
2. Lets define the `DragDropContext` property `onDragEnd` to handle the rules when a `Draggable` is dropped into any `Droppable`. Note this will also fire when we drag
   `Cards` into `CardList` so we will need to use the `Draggable` property `type` to differentiate between the draggable types
3. With the `onDragEnd` we will be given the properties `{ draggableId, source, destination, type }`. Basically, we will be told the draggable we just moved and the index (array index)
   we are trying to fit into. This has not modified the real state `listsData` so we will need do the following things
    1. Change path depending on the `type` (COLUMN or Else)
    2. if `COLUMN`
        1. Clone `this.state.listsData` to a new array object
        2. Using `draggableId` search for the list that we moved
        3. If `destination.index === 0`
            1. We are dragging to the start. Fetch the original `destination.index` from `this.state.listsData` clone and get its position.
               We will be generating a new position using the lexicographic util `generatePosition(null, {original0thPosition})`
        4. Else if `destination.index === this.state.listsData.length - 1`
            1. We are dragging to the end. Fetch the original `destination.index` and generate a position after it using the
               lexicographic function `generatePosition({originalEndPosition}, null)`
        5. Else 
            1. We are in the middle of 2 lists. Get the start list by using `this.state.listsData[destination.index - 1]` and
               the end list by using `this.state.listsData[destination.index]` and generate a new position with the lexicographic
               function `generatePosition({startList.position}, {endList.position})`
        6. Once this is done, save the state by using `this.setState({ listsData: listsData })` and render should correctly save the positions

## Steps 
### Wireframe/Design 
* Design 
*  

### Component 
#### Structure
The board should contain a name and a container that can hold a bunch of card lists

* Component
    * Board name
    * DragDropContext
        * Droppable
            * CardList container
                * Draggable
                    * <card-list.component.tsx\>
                * Draggable
                    * ...
                * Draggable
                    * <card-list.component.tsx\>


***

### Story 
We should have a single board component that has dynamic props which are editable using storybook knobs

The card lists should also be moveable and should only land within the card list container

***

### Unit Test
* We will add a proptypes unit test to the Board component
    * name
    * listsData

* The listsData prop should be an optional prop

* The lists data should be an array that contains an object with the following keys
    * id
    * position (generated by lexicographic util)
    * name
    * cards (array)
        * id
        * name

* Test what we should render when the listsData that is passed in is
    * Valid - Print the list to the screen
    * Invalid - Skip the list with invalid data
    * Mixed - Print valid and skip invalid
    

***

### BDD Test 
* When we load the Board to the screen,
We will see the board name and
We will see 2 card lists and
Each list will have 2 cards each

    Given I have a Board
    When I look at it
    Then I should see the name of the board
    And I should see 2 card lists with the names of 'List 1' and 'List 2'
    And 2 Cards on each list with the names of 'Card 1', 'Card 2', 'Card 3' and 'Card 4'
